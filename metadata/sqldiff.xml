<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqldiff PUBLIC "-//OpenMRS//DTD OpenMRS SQL Diff Config 1.0//EN" "http://resources.openmrs.org/doctype/sqldiff-1.0.dtd">

<sqldiff version="1.0">
	<help>
		USE:
			The diffs are ordered by datamodel version number.
			The script can be run in a top down fashion and is
			expected to not failor overwrite old data
		
		EXPECT:
			- "use business-database-name;" was called prior to
			   calling this script
	</help>
	
	<diff>
		<version>1.0.0</version>
		<author>Michael Seaton</author>
		<date>May 1 2009</date>
		<description>
			Create default schema for module
		</description>
		<sql>
			CREATE TABLE `report_object` (
			  `report_object_id` int(11) NOT NULL auto_increment,
			  `name` varchar(255) NOT NULL default '',
			  `description` varchar(1000),
			  `report_object_type` varchar(255) NOT NULL default '',
			  `report_object_sub_type` varchar(255) NOT NULL default '',
			  `xml_data` text,
			  `creator` int(11) NOT NULL default '0',
			  `date_created` datetime NOT NULL default '0000-00-00 00:00:00',
			  `changed_by` int(11) default NULL,
			  `date_changed` datetime default NULL,			  
			  `voided` smallint(1) NOT NULL default '0',
			  `voided_by` int(11) default NULL,
			  `date_voided` datetime default NULL,
			  `void_reason` varchar(255) default NULL,
			  PRIMARY KEY (`report_object_id`),
			  CONSTRAINT `user_who_changed_report_object` FOREIGN KEY (`changed_by`) REFERENCES `users` (`user_id`),
			  CONSTRAINT `report_object_creator` FOREIGN KEY (`creator`) REFERENCES `users` (`user_id`),
			  CONSTRAINT `user_who_voided_report_object` FOREIGN KEY (`voided_by`) REFERENCES `users` (`user_id`)
			) ENGINE=InnoDB DEFAULT CHARSET=utf8;
			
			CREATE TABLE `report_schema_xml` (
			  `report_schema_id` int(11) NOT NULL auto_increment,
			  `name` varchar(255) NOT NULL default '',
			  `description` varchar(1000) NOT NULL default '',
			  `xml_data` mediumtext NOT NULL,
			  PRIMARY KEY (`report_schema_id`)
			) ENGINE=InnoDB DEFAULT CHARSET=utf8;
		</sql>
	</diff>
	
</sqldiff>
